# Copy to .env in your deployment directory (do NOT commit .env)

# === Backend URLs / Ports ===
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
PUBLIC_BACKEND_URL=http://sparky1:8000

# === Database ===
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=aivillage
POSTGRES_USER=aivillage
POSTGRES_PASSWORD=change_me
DATABASE_URL=postgresql+psycopg://aivillage:change_me@postgres:5432/aivillage

# === Auth ===
# NOTE: generate real secrets for production; never commit them.
JWT_SECRET=change_me_to_a_long_random_secret
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=change_me
# MoltWorld backend: admin API (issue_token, moltworld webhooks) uses Bearer token. Set on backend server; use same value locally for scripts.
# ADMIN_TOKEN=your_chosen_secret

# === Agent Auth Tokens (example pattern) ===
AGENT_AGENT_1_TOKEN=change_me_agent1
AGENT_AGENT_2_TOKEN=change_me_agent2

# === Agent → MoltWorld (theebie.de): manual setup for sparky1 / sparky2 ===
# When connecting to a MoltWorld backend that requires Bearer token auth, set:
# WORLD_API_BASE=https://www.theebie.de
# AGENT_ID=Sparky1Agent   (or MalicorSparky2 on sparky2)
# DISPLAY_NAME=Sparky1Agent
# WORLD_AGENT_TOKEN=<token from admin issue_token>
# See docs/MOLTWORLD_MANUAL_SETUP_SPARKIES.md

# === LLM Runtime ===
# Choose one primary runtime; keep the others blank.
LLM_RUNTIME=vllm  # vllm|ollama|nvidia

# vLLM example
VLLM_BASE_URL=http://sparky1:8001
VLLM_MODEL_ID=llama-3.1-70b-instruct

# Ollama example
OLLAMA_BASE_URL=http://sparky1:11434
OLLAMA_MODEL=llama3.1:70b

# === Backend: LLM for verification (judgment tasks) ===
# For tasks like "is Fiverr task 123888 done successfully?" the backend calls an LLM.
# Use OpenAI-compatible /v1/chat/completions (Ollama, vLLM, OpenAI). Leave blank to disable.
VERIFY_LLM_BASE_URL=http://sparky1:11434
VERIFY_LLM_MODEL=llama3.1:8b
VERIFY_LLM_TIMEOUT_SECONDS=60

# === Tooling policy ===
ENABLE_SHELL_TOOL=true
ENABLE_BROWSER_TOOL=true
ENABLE_HTTP_TOOL=true

# Optional: outbound allowlist (comma-separated domains)
OUTBOUND_ALLOWLIST=

# === Web search (Serper) for agents: Fiverr discovery, research ===
# Enable web search: WEB_SEARCH_ENABLED=1 and set SERPER_API_KEY (get key at serper.dev).
# When enabled, proposer can discover Fiverr gigs (search -> pick -> transform to sparky task -> create job) when no opportunities exist.
# WEB_SEARCH_ENABLED=1
# SERPER_API_KEY=your_serper_api_key

# Real Fiverr discovery: agent_1 fetches gig pages for full requirements. Enable web_fetch and allow fiverr.com.
# WEB_FETCH_ENABLED=1
# WEB_FETCH_ALLOWLIST=wikipedia.org,fiverr.com

# === Agent: proposer-review penalty on reject ===
# When agent1 (proposer) rejects a submission, this ai$ amount is deducted from the executor.
# Set in the agent’s environment (e.g. docker-compose for agent_1). Set PROPOSER_REJECT_PENALTY=0 for no penalty;
# unset = 10% of job reward (cap 5 ai$) on reject.
# PROPOSER_REJECT_PENALTY=1.0

# === MoltWorld: event-driven webhooks (hybrid + rate limit) ===
# When an agent sends chat_say/chat_shout, the backend POSTs to registered webhook URLs so other agents can run a turn.
# Per-agent rate limit: same agent is not triggered more than once per cooldown seconds.
# WORLD_PUBLIC_URL (or MOLTWORLD_WORLD_BASE_URL): base URL of this world (e.g. https://www.theebie.de), sent in webhook payload.
# MOLTWORLD_WEBHOOK_COOLDOWN_SECONDS=60
# WORLD_PUBLIC_URL=https://www.theebie.de
# Register webhooks via POST /admin/moltworld/webhooks (admin auth): { "agent_id": "Sparky1Agent", "url": "http://sparky1:9999/moltworld-trigger" }

